<!DOCTYPE html>
<meta charset="utf-8">
<title>Registered Voters in Georgia over Time</title>
<style> /* set the CSS */
div.age {   
 	position: absolute;           
	text-align: center;           
	width: 66.94px;                  
	height: 100px;                 
	padding: 0px;             
	font: 12px sans-serif;        
	background: none;   
	 
border: solid black ;
	    
	pointer-events: none;         
}

div.help {   
 	position: absolute;           
	text-align: center;           
	width: 150px;                  
	max-height: 100px;                 
	padding: 05px;             
	font: 12px sans-serif;        
	background: none;   
    border-radius: 5px;
	border: dashed black 2px;

	    
	pointer-events: none;         
}
.bar { fill: steelblue; }
path:hover {
	stroke-width: 4px;
}

.legend-axis path{
    stroke: black;
    display: none;
}
text.source {
            font-size: 10px;
            font-style: italic;
        }
        text.sources {
            font-size: 10px;
            font-style: italic;
        }
        
        text.byline {
            font-size: 12px;
            font-style: italic;
            font-family: Arial, Helvetica, sans-serif;
        }

        text.title {
            font-size: 24px;
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            text-decoration: underline;
            font-weight: bold;
            text-anchor: middle;
        }
        text.subtitle {
            font-size: 12px;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            font-style: italic;
            text-anchor: middle;

        }
</style>
<body>
	
<!-- load the d3.js library -->    	
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>

// set the dimensions and margins of the graph
var margin = {top: 20, right: 20, bottom: 50, left: 40},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

// set the ranges
var x = d3.scaleBand()
          .range([0, width])
          .padding(0.1);
var y = d3.scaleLinear()
          .range([height, 0]);
          
// append the svg object to the body of the page
// append a 'group' element to 'svg'
// moves the 'group' element to the top left margin
var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", 
          "translate(" + margin.left + "," + margin.top + ")");

// get the data
d3.csv("https://raw.githubusercontent.com/gcdean38/maneater/master/georgiaRunoff.csv", function(error, data) {
  if (error) throw error;

  // format the data
  data.forEach(function(d) {
    d.active = +d.active;
  });

var age1 = d3.select("body").append("div").attr("class", "age").style("stroke","black").style("stroke-width","2px").style("opacity", 0) 
.style("background","#B3E5FC").html("<br>18-22").style("left", "870.5px").style("top", "69.110900000000015px").style("height","50.76501456px")
var age2 = d3.select("body").append("div").attr("class", "age").style("stroke","black").style("stroke-width","2px").style("opacity", 0)   
.style("background","#81D4FA").html("<br>25-29").style("top", "119.8759146px").style("height","38.92022705px").style("left", "870.5px")
var age3 = d3.select("body").append("div").attr("class", "age").style("stroke","black").style("stroke-width","2px").style("opacity", 0)   
.style("background","#4FC3F7").html("<br>30-34").style("top", "158.7961416px").style("height","36.80661056px").style("left", "870.5px")
var age4 = d3.select("body").append("div").attr("class", "age").style("stroke","black").style("stroke-width","2px").style("opacity", 0)   
.style("background","#29B6F6").html("<br>35-39").style("top", "195.6027522px").style("height","33.54977591px").style("left", "870.5px")
var age5 = d3.select("body").append("div").attr("class", "age").style("stroke","black").style("stroke-width","2px").style("opacity", 0)   
.style("background","#03A9F4").html("<br>40-44").style("top", "229.1525281px").style("height","32.23396078px").style("left", "870.5px")
var age6 = d3.select("body").append("div").attr("class", "age").style("stroke","black").style("stroke-width","2px").style("opacity", 0)   
.style("background","#039BE5").html("<br>45-49").style("top", "261.3864889px").style("height","33.15399512px").style("left", "870.5px")
var age7 = d3.select("body").append("div").attr("class", "age").style("stroke","black").style("stroke-width","2px").style("opacity", 0)   
.style("background","#0288D1").html("<br>50-54").style("top", "294.540484px").style("height","34.00204905px").style("left", "870.5px")
var age8 = d3.select("body").append("div").attr("class", "age").style("stroke","black").style("stroke-width","2px").style("opacity", 0)   
.style("background","#0277BD").html("<br>55-59").style("top", "328.542533px").style("height","34.53376807px").style("left", "870.5px")
var age9 = d3.select("body").append("div").attr("class", "age").style("stroke","black").style("stroke-width","2px").style("opacity", 0)   
.style("background","#01579B").html("<br>60-64").style("top", "363.0763011px").style("height","31.26367387px").style("left", "870.5px")
var age10 = d3.select("body").append("div").attr("class", "age").style("stroke","black").style("stroke-width","2px").style("opacity", 0)   
.style("background","blue").html("<br>65+").style("top", "394.339975px").style("height","77.77092505px").style("left", "870.5px")

var help = d3.select("body").append("div").attr("class","help")
.html("Hover over 2020 to see how registered voters broke down by age group! ")
.style("top","50px").style("left","700px")
  // Scale the range of the data in the domains
  x.domain(data.map(function(d) { return d.year; }));
  y.domain([0, 8000000]);

  var mouseout = function(d){
   age1.transition().duration(200).style("opacity",0)
   age2.transition().duration(200).style("opacity",0)
   age3.transition().duration(200).style("opacity",0)
   age4.transition().duration(200).style("opacity",0)
   age5.transition().duration(200).style("opacity",0)
   age6.transition().duration(200).style("opacity",0)
   age7.transition().duration(200).style("opacity",0)
   age8.transition().duration(200).style("opacity",0)
   age9.transition().duration(200).style("opacity",0)
   age10.transition().duration(200).style("opacity",0)   
 }

 var mouseover = function(d){
    age1.transition().duration(200).style("opacity",1)
    age2.transition().duration(200).style("opacity",1)
    age3.transition().duration(200).style("opacity",1)
    age4.transition().duration(200).style("opacity",1)
    age5.transition().duration(200).style("opacity",1)
    age6.transition().duration(200).style("opacity",1)
    age7.transition().duration(200).style("opacity",1)
    age8.transition().duration(200).style("opacity",1)
    age9.transition().duration(200).style("opacity",1)
    age10.transition().duration(200).style("opacity",1)
    help.transition().duration(200).style("opacity",0)
 }		

  // append the rectangles for the bar chart
  svg.selectAll(".bar")
      .data(data)
    .enter().append("rect")
      .attr("class", "bar")
      .attr("x", function(d) { return x(d.year); })
      .attr("width", x.bandwidth())
      .attr("y", function(d) { return y(d.active); })
      .attr("height", function(d) { return height - y(d.active); })
      .on("mouseover", mouseover )   
//.on("mousemove",mousemove)
    // fade out tooltip on mouse out               
    .on("mouseout",mouseout)
	.on("click",mouseover);;

    svg.append("rect")
    .attr("x", function(d) { return x(1998); })
    .attr("width", x.bandwidth()*12.2)
    .attr("y", function(d) { return y(7233584); })
    .attr("height", function(d) { return height - y(7233584); })
    .attr("stroke","black")
    .attr("opacity",0)
    //.on("mouseover", mouseover )   



  // add the x Axis
  svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));
var milForm = d3.format(".1s")
  // add the y Axis
  svg.append("g")
      .call(d3.axisLeft(y).tickFormat(milForm));
      
      svg.append("text")
    .attr("class","title")
    .attr("x",width/2)
    .attr("y",height*.05)
    .attr('text-anchor',"middle")
    .text("Registered Voters in Georgia")
    svg.append("line")
.attr("x1",0)
.attr("x2",width)
.attr('y1', height*1.05)
.attr('y2', height*1.05)
.attr("stroke","black")
.attr("stroke-width","1px")


svg.append("text")
		.attr('class', 'byline')
		.attr('y', height*1.075)
		.attr('x', width)
		.attr('text-anchor', "end")
    .text('GEOFFREY DEAN/ASST. GRAPHICS EDITOR')

   
svg.append("text")
.attr("class","source")
.attr('y', height*1.075)
.attr("x",0)
.attr('text-anchor',"start")
.text("Source: ")

svg.append('text')
		.attr('class', 'sources')
		.attr('y', height*1.075)
		.attr('x', width*.037)
		.attr('text-anchor', 'start')
        .style("fill","blue")
        .style("text-decoration","underline")
		.text('Georgia Secretary of State')

		svg.append('text')
		.attr('class', 'sources')
		.attr('y', height*1.075)
		.attr('x', width*.155)
		.attr('text-anchor', 'start')
        .style("fill","black")
		.text(', 2020.')

	svg.append("a")
    .attr("xlink:href", "https://sos.ga.gov/admin/files/Voter%20Registration%20Statistics%20Historical%20-%20Updated%2011-26-18.pdf" )
    .attr("target","_blank")
    .append("rect")  
    .attr('y', height*1.075-12)
	.attr('x', width*.04)
    .attr("height", 9)
    .attr("width",width*.155- width*.04)
    .style("fill", "white")
    .style("opacity",.0)
    .style("stroke","black")

});

</script>
</body>